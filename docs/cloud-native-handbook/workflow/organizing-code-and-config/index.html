<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Organizing Code and Config Using a seperate repository for code and deployment manifests is recommended. The purpose of the code repo is solely to produce versioned software artifacts. The purpose of the config repo is solely to describe deployable software. Seperating these concerns provides multiple benefits.
Small Merges Multiple environments typically correspond to multiple git branches. By keeping the concept of deployments local to config repositories (and out of code repos) you are able to handle environment promotion with smaller merges."><meta property="og:title" content="Organizing Code &amp; Config" />
<meta property="og:description" content="Organizing Code and Config Using a seperate repository for code and deployment manifests is recommended. The purpose of the code repo is solely to produce versioned software artifacts. The purpose of the config repo is solely to describe deployable software. Seperating these concerns provides multiple benefits.
Small Merges Multiple environments typically correspond to multiple git branches. By keeping the concept of deployments local to config repositories (and out of code repos) you are able to handle environment promotion with smaller merges." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://codeform.io/docs/cloud-native-handbook/workflow/organizing-code-and-config/" />
<meta property="article:modified_time" content="2020-08-18T16:16:07-04:00" />
<title>Organizing Code &amp; Config | &gt; codeform</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.63eb88daa545365405ecdbb21033286a325c60a36cfa6d22d21e7c3bc9286941.css" integrity="sha256-Y&#43;uI2qVFNlQF7NuyEDMoajJcYKNs&#43;m0i0h58O8koaUE=">


<script defer src="/en.search.min.574a009d162f8bcc96d6c520876834f650d66e7ef44c3c972c9a144c149d4aa3.js" integrity="sha256-V0oAnRYvi8yW1sUgh2g09lDWbn70TDyXLJoUTBSdSqM="></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>&gt; codeform</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  

  
  





 
  
    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/cloud-native-handbook/" class="">Cloud Native Handbook</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/cloud-native-handbook/workflow/" class="collapsed ">Workflow</a>
  


    




  
  <ul>
    
      
        <li>

  
  <a href="/docs/cloud-native-handbook/workflow/organizing-code-and-config/" class="active">Organizing Code &amp; Config</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/cloud-native-handbook/workflow/developing/" class="">Developing</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/cloud-native-handbook/workflow/deploying/" class="">Deploying</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/cloud-native-handbook/workflow/exercise/" class="">Exercise</a>
  

</li>
      
    
  </ul>
  



  </li>


      
    
  </ul>
  



  </li>


      
    
  </ul>
  



  












  
<ul>
  
  <li>
    <a href="/mentoring/" >
        Mentoring
      </a>
  </li>
  
  <li>
    <a href="/posts/" >
        Posts
      </a>
  </li>
  
  <li>
    <a href="https://github.com/codeformio" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Organizing Code &amp; Config</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#organizing-code-and-config">Organizing Code and Config</a>
      <ul>
        <li><a href="#small-merges">Small Merges</a></li>
        <li><a href="#change-trail">Change Trail</a></li>
        <li><a href="#logical-organization-of-components">Logical Organization of Components</a></li>
        <li><a href="#simple-automation">Simple Automation</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="organizing-code-and-config">Organizing Code and Config</h1>
<p>Using a seperate repository for code and deployment manifests is recommended. The purpose of the code repo is solely to produce versioned software artifacts. The purpose of the config repo is solely to describe deployable software. Seperating these concerns provides multiple benefits.</p>
<h2 id="small-merges">Small Merges</h2>
<p>Multiple environments typically correspond to multiple git branches. By keeping the concept of deployments local to config repositories (and out of code repos) you are able to handle environment promotion with smaller merges. Config repos only need to merge a reference to a new container image tag rather than merging all of the code changes across N branches.</p>
<p>
  <img src="/images/develop-deploy-promotion.jpg" alt="Promoting software aross environments" /></p>
<h2 id="change-trail">Change Trail</h2>
<p>As a result of seperating development from deployment, any commit to a config repo represents a change to running software. This produces a legible, easily auditable change trail.</p>
<h2 id="logical-organization-of-components">Logical Organization of Components</h2>
<p>Applications are commonly composed of multiple components (REST APIs, databases, etc.). Some of these components may be built in-house while others may be from vendors or open source projects. A single config repo can provide this 1:N mapping of application to its components. This avoids the problem that arises when code and config co-exist in the same repositories: which repo should contain shared components?</p>
<h2 id="simple-automation">Simple Automation</h2>
<p>If code and deployment manifests live in the same repo, additional intelligence will be needed to determine if a code change or a config change occured in order to decide whether a build is necessary. This problem commonly requires slightly different code for each repository (due to variance in directory structures and language/tooling choices).</p>
<h2 id="summary">Summary</h2>
<pre><code>1 Config Repo : N Code Repos

Code Repo (for developing) --produces--&gt; Built Software

Config Repo (for deploying) --produces--&gt; Running Software
</code></pre></article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">



  <div>
    
    <a class="flex align-center" href="https://github.com/codeformio/codeform.io/commit/47027ad74c51e5d9e3ec78d62f72482e30d5869a" title='Last modified by Nick Stogner | August 18, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>August 18, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/codeformio/codeform.io/edit/master/content/docs/cloud-native-handbook/workflow/organizing-code-and-config.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#organizing-code-and-config">Organizing Code and Config</a>
      <ul>
        <li><a href="#small-merges">Small Merges</a></li>
        <li><a href="#change-trail">Change Trail</a></li>
        <li><a href="#logical-organization-of-components">Logical Organization of Components</a></li>
        <li><a href="#simple-automation">Simple Automation</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












